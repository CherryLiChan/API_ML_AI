# 自定义模板文字识别 - 使用流程说明

## 目录
- [第一步：创建模板](#第一步：创建模板)
- [第二步：创建分类器(可选)](#第二步：创建分类器(可选))
- [第三步：API/SDK调用](#第三步：API/SDK调用)
- [特别注意](#特别注意)
- [具体代码](https://github.com/CherryLiChan/API_ML_AI/blob/master/python-code.ipynb)

## 第一步：创建模板
#### （一）创建模板
1. 点击’创建模板’按钮后上传一张模板图片。请尽量确保图片清晰、平整、完整、勿有弯折
![创建模板](https://note.youdao.com/yws/api/personal/file/5E63CE009573409ABD334EAEB9954964?method=download&shareKey=faca9f2f4f1aeb080d72ad13c288d750)
![上传模板图片](https://note.youdao.com/yws/api/personal/file/294BEF8DB88247ACB2BA85C88FBBA166?method=download&shareKey=d4bfdd58b2b9c56c0c828b48b5b1e351)

2. 上传成功后，点击下一步，进入编辑界面填写基本信息等。
![填写基本信息](https://note.youdao.com/yws/api/personal/file/D76052F0483945A4A32EE94B6A0236CA?method=download&shareKey=e8ec6de4b8a138c3064971e7126214c8)

#### （二）框选参照字段
- 需要在图片中框选至少4个内容和位置都固定的文字作为【参照字段】，后续识别同模版的图片时，会以图片中的【参照字段】为依据，对图片进行矫正。

- 我的参照字段：姓名、学号、专业（院系）、性别、证件类型
> PS：a. 因为涉及隐私，在此就不放身份证信息啦；
> b. 目前我校饭卡最常见的为绿卡和红卡，所以我两种卡都创建了模板。
> c. 目前没有教师饭卡资源，所以暂时不做教师饭卡。

#### （三）框选识别区
- 使用识别区框选工具框选需要识别的字段值，框选后在右侧给该识别区命名；如果识别区为：金额、日期、百分比、数字类型的内容时，则可以在‘字段类型’中选择对应的属性，以提高准确率。

- 我的识别区部分：
	- a.因为没全校学生姓名的数据，所以“字段类型”中姓名部分为“常规”
	- b.全校学号数据通过热心人士的帮忙获得，所以“字段类型”中学号部分为自己收集到的数据上传后创建的“我的字段类型-学号”
	- c.“专业（院系）、性别、证件类型”因为数据量并不大，所以我直接下载了百度提供的“词典模板”并在此模板上修改上传。
![上传字段类型](https://note.youdao.com/yws/api/personal/file/DA62EE6893634056A3CD9C8AFC8DBE96?method=download&shareKey=5aa880c17170949489b90817fb7b507f)

#### （四）测试发布
- 点击保存，百度便会在‘修改历史’中保存该版本的模型，方便我们后期回滚
- 保存后，建议使用‘试一试’测试一下识别效果，如果您认可该模版的效果，即可发布上线该模版，否则可以返回继续编辑优化。

## 第二步：创建分类器(可选)
#### （一）分类器管理页面新建分类器
![新建分类器](https://note.youdao.com/yws/api/personal/file/AE6832D0118D415A97640C902EDDF5C5?method=download&shareKey=62a80402a48929cedc1908fdcc96f516)

#### （二）选择参与分类的模板
1. 要求至少添加两个模板参与分类器训练。我之前刚好创建了两个模板。
2. 经过几轮训练，可以看到目前我的红色饭卡模板预估准确率为88.89%；绿色饭卡模板预估准确率为100.00%；整个分类器的预估准确率为94.44%。
![分类器训练](https://note.youdao.com/yws/api/personal/file/16BF009CBA9D49FFB9F598B8CEF726AB?method=download&shareKey=6f05f72db1ed959e15503471b979e920)
3. 上传对应模板的训练集
	1.要求上传至少30张同一模版图片的压缩包，上传不超过200MB，ZIP格式压缩包。
	2.图片是否清晰、平整、完整、有弯折、横或竖、正或歪，都会影响 训练集准确率大小的预估。
	3.通过各种渠道的收集，共收集到红色饭卡33张，绿色饭卡32张参与我的模板的训练。

4. 训练完成后进行效果测试
保护个人信息，不给你们看她的头像，>.<
![效果测试](https://note.youdao.com/yws/api/personal/file/791EF17748D6421584AB047447951ECA?method=download&shareKey=b737f6952ec7d8c85bc25a9dfda04e7b)

## 第三步：API/SDK调用
当您发布完模版后，您就可以通过API或SDK的方式去使用该模版来对同模版的图片进行结构化识别。

## 特别注意：
上传用于模板制作的图片，
- 最大：小于等于4M，且分辨率小于等于4096像素乘4096像素，
- 最小：大于等于15像素乘15像素且大于等于1KB，
- 后期上传识别的图片最大：大小不超过4M，且分辨率小于等于4096像素乘4096像素，
- 最小：大于等于15像素乘15像素且大于等于1KB。

## [具体代码见 “python-code.ipynb”](https://github.com/CherryLiChan/API_ML_AI/blob/master/python-code.ipynb)
